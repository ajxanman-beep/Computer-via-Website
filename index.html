<script type="module">
    // ... (Keep your Firebase Init) ...

    const screenImg = document.getElementById('pc-screen');
    const stat = document.getElementById('stat');
    let frameCount = 0;
    let startTime = Date.now();

    // LISTEN FOR THE STREAM
    // 'ref' and 'onValue' should be imported from the firebase database module
    onValue(ref(db, 'pc_control/stream'), (snapshot) => {
        const data = snapshot.val();
        if (data) {
            // High-speed update
            screenImg.src = "data:image/webp;base64," + data;
            
            // FPS Counter to track speed
            frameCount++;
            const elapsed = (Date.now() - startTime) / 1000;
            if (elapsed > 1) {
                stat.innerText = "FPS: " + Math.round(frameCount / elapsed);
                frameCount = 0;
                startTime = Date.now();
            }
        }
    }, { onlyOnce: false }); // Ensure it stays listening

    // ... (Keep Mouse/Key Listeners) ...
</script>
